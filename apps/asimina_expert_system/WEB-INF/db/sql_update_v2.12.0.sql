insert into dev_commons.config (code, val) values ("PREPROD_PORTAL_DB", "dev_portal");
insert into dev_commons.config (code, val) values ("PREPROD_SHOP_DB", "dev_shop");

update query_types set query_type = 'Structured page' where query_name = 'structured_page';

create table es_query_levels_v211 as select * from es_query_levels;
create table es_query_col_mapping_v211 as select * from es_query_col_mapping;

alter table es_query_levels change j_object_columns j_object_columns text;

update es_queries set query = '(select l.langue_id, l.langue_code, pvd.action_button_desktop, pvd.action_button_desktop_url, pvd.action_button_mobile, pvd.action_button_mobile_url, c.catalog_type as catalog_type, coalesce(fl.uuid,c.catalog_uuid) as folder_id, coalesce(fl.name,c.name) as folder_name, p.product_type, p.payment_online, p.payment_cash_on_delivery, p.sort_variant, case coalesce(p.sort_variant,'''')  when ''cu'' then ''Custom'' when ''pa'' then ''Price asc'' when ''pd'' then ''Price desc'' when ''cdd'' then ''Created date desc'' when ''cda'' then ''Created date asc'' else coalesce(p.sort_variant,'''') end sort_variant_label, p.allow_ratings, p.allow_comments, p.allow_complaints, p.allow_questions, p.is_new, p.show_basket, p.show_quickbuy, p.order_seq product_order_seq, p.brand_name, p.product_uuid as product_id, p.lang_1_name as product_lang_1_name, p.lang_2_name as product_lang_2_name, p.lang_3_name as product_lang_3_name, p.lang_4_name as product_lang_4_name, p.lang_5_name as product_lang_5_name, pv.id as variant_id, pv.price variant_price, pv.sku variant_sku, pv.stock variant_stock, pv.is_active variant_is_active, pv.is_default variant_is_default, pv.is_show_price variant_is_show_price, pv.sticker variant_sticker , pvd.name as variant_name, pd.summary, pd.main_features, pvr.sort_order variant_res_sort_order, pvr.id as variant_res_id, pvr.type as variant_res_type, pvr.path as variant_res_path, pvr.label as variant_res_label, peb.id as essentials_id, peb.block_text essentials_block_text, peb.file_name essentials_file_name, peb.image_label as essentials_image_label, peb.order_seq essentials_order_seq, pvref.cat_attrib_id, cav.attribute_value, ca.name as attribute_name, cav.small_text attribute_small_text, pt.tag_id, tg.label tag_label, ptabs.name as tab_name, ptabs.id as tab_id, ptabs.content as tab_content, ptabs.order_seq as tab_order_seq, st.display_name_1 sticker_label_lang_1, st.display_name_2 sticker_label_lang_2, st.display_name_3 sticker_label_lang_3, st.display_name_4 sticker_label_lang_4, st.display_name_5 sticker_label_lang_5, pi.id as product_img_id, pi.image_file_name product_img_file_name, pi.image_label product_image_label, pi.sort_order product_img_sort_order, (select concat(''['',group_concat(concat(''{"name":"'',replace(specca.name,''"'',''\\"''),''","value":"'',replace(pav.attribute_value,''"'',''\\"''),''"}'')),'']'') from ##CATALOG_DB##.product_attribute_values pav inner join ##CATALOG_DB##.catalog_attributes specca on specca.cat_attrib_id = pav.cat_attrib_id where coalesce(pav.attribute_value,'''') <> '''' and pav.product_id = p.id group by p.id) spec_attribs, cw.id as comewith_id, cw.name as comewith_name, cw.lang_1_description as comewith_lang_1_description, cw.lang_2_description as comewith_lang_2_description, cw.lang_3_description as comewith_lang_3_description, cw.lang_4_description as comewith_lang_4_description, cw.lang_5_description as comewith_lang_5_description, cw.visible_to comewith_visible_to, cw.start_date as comewith_start_date, cw.end_date comewith_end_date, cw.comewith as comewith, cw.type as comewith_type, cw.applied_to_type as comewith_applied_to_type, case when cw.applied_to_type = ''product'' then cwproduct.product_uuid else cw.applied_to_value end as comewith_applied_to_value, cw.title as comewith_title, cw.variant_type as comewith_variant_type, cw.frequency as comewith_frequency, cw.order_seq as comewith_order_seq, promo.id as promo_id, promo.name as promo_name, promo.start_date as promo_start_date, promo.end_date as promo_end_date, promo.flash_sale as promo_flash_sale, promo.flash_sale_quantity as promo_flash_sale_quantity, promo.visible_to as promo_visible_to, promo.discount_type as promo_discount_type, promo.discount_value as promo_discount_value, promo.duration as promo_duration, promo.lang_1_description as promo_lang_1_description, promo.lang_2_description as promo_lang_2_description, promo.lang_3_description as promo_lang_3_description, promo.lang_4_description as promo_lang_4_description, promo.lang_5_description as promo_lang_5_description, promo.lang_1_title as promo_lang_1_title, promo.lang_2_title as promo_lang_2_title, promo.lang_3_title as promo_lang_3_title, promo.lang_4_title as promo_lang_4_title, promo.lang_5_title as promo_lang_5_title, promo.frequency as promo_frequency, promo_rules.applied_to_type as promo_applied_to_type, case when promo_rules.applied_to_type = ''product'' then promoproduct.product_uuid else promo_rules.applied_to_value end as promo_applied_to_value, promo.order_seq as promo_order_seq, addfee.id as addfee_id, addfee.additional_fee as addfee_additional_fee, addfee.visible_to as addfee_visible_to, addfee.start_date as addfee_start_date, addfee.end_date as addfee_end_date, addfee_rules.element_type as addfee_element_type, case when addfee_rules.element_type = ''product'' then addfeeproduct.product_uuid else addfee_rules.element_type_value end as addfee_element_type_value, addfee.order_seq as addfee_order_seq, addfee.lang_1_description as addfee_lang_1_description, addfee.lang_2_description as addfee_lang_2_description, addfee.lang_3_description as addfee_lang_3_description, addfee.lang_4_description as addfee_lang_4_description, addfee.lang_5_description as addfee_lang_5_description, ccnt.published_url from ##CATALOG_DB##.language l inner join ##CATALOG_DB##.products p inner join ##CATALOG_DB##.catalogs c on c.site_id = ##site_id## and c.id = p.catalog_id left outer join ##PORTAL_DB##.cached_content_view ccnt on ccnt.site_id = c.site_id and ccnt.content_type = ''product'' and ccnt.content_id = p.id and ccnt.lang = l.langue_code left outer join ##CATALOG_DB##.products_folders fl on fl.id = p.folder_id left outer join ##CATALOG_DB##.product_variants pv on pv.product_id = p.id left outer join ##CATALOG_DB##.product_descriptions pd on pd.product_id = p.id and l.langue_id = pd.langue_id left outer join ##CATALOG_DB##.product_variant_details pvd on pv.id = pvd.product_variant_id and pvd.langue_id = l.langue_id left outer join ##CATALOG_DB##.product_variant_resources pvr on pvr.product_variant_id = pv.id and pvr.langue_id = l.langue_id left outer join ##CATALOG_DB##.product_essential_blocks peb on peb.product_id = p.id and peb.langue_id = l.langue_id left outer join ##CATALOG_DB##.product_variant_ref pvref on pvref.product_variant_id = pv.id left outer join ##CATALOG_DB##.catalog_attribute_values cav on cav.id = pvref.catalog_attribute_value_id left outer join ##CATALOG_DB##.catalog_attributes ca on ca.cat_attrib_id = pvref.cat_attrib_id left outer join ##CATALOG_DB##.product_tags pt on pt.product_id = p.id left outer join ##CATALOG_DB##.tags tg on tg.id = pt.tag_id left outer join ##CATALOG_DB##.product_tabs ptabs on ptabs.product_id = p.id and ptabs.langue_id = l.langue_id left outer join ##CATALOG_DB##.stickers st on c.site_id = st.site_id and st.sname = pv.sticker left outer join ##CATALOG_DB##.product_images pi on pi.product_id = p.id and pi.langue_id = l.langue_id left outer join ##CATALOG_DB##.comewiths_rules cwr on case when cwr.associated_to_type = ''sku'' then pv.sku = cwr.associated_to_value when cwr.associated_to_type = ''product'' then p.id = cwr.associated_to_value when cwr.associated_to_type = ''product_type'' then p.product_type = cwr.associated_to_value when cwr.associated_to_type = ''catalog'' then c.id = cwr.associated_to_value when cwr.associated_to_type = ''manufacturer'' then p.brand_name = cwr.associated_to_value when cwr.associated_to_type = ''tag'' then cwr.associated_to_value in (select pt2.tag_id from ##CATALOG_DB##.product_tags pt2 where pt2.product_id = p.id) end left outer join ##CATALOG_DB##.comewiths cw on cw.site_id = c.site_id and cw.id = cwr.comewith_id left outer join ##CATALOG_DB##.products cwproduct on cwproduct.id = cw.applied_to_value left outer join ##CATALOG_DB##.promotions_rules promo_rules on case when promo_rules.applied_to_type = ''sku'' then pv.sku = promo_rules.applied_to_value when promo_rules.applied_to_type = ''product'' then p.id = promo_rules.applied_to_value when promo_rules.applied_to_type = ''product_type'' then p.product_type = promo_rules.applied_to_value when promo_rules.applied_to_type = ''catalog'' then c.id = promo_rules.applied_to_value when promo_rules.applied_to_type = ''manufacturer'' then p.brand_name = promo_rules.applied_to_value when promo_rules.applied_to_type = ''tag'' then promo_rules.applied_to_value in (select pt2.tag_id from ##CATALOG_DB##.product_tags pt2 where pt2.product_id = p.id) end left outer join ##CATALOG_DB##.promotions promo on promo.id = promo_rules.promotion_id and promo.site_id = c.site_id left outer join ##CATALOG_DB##.products promoproduct on promoproduct.id = promo_rules.applied_to_value left outer join ##CATALOG_DB##.additionalfee_rules addfee_rules on case when addfee_rules.element_type = ''sku'' then pv.sku = addfee_rules.element_type_value when addfee_rules.element_type = ''product'' then p.id = addfee_rules.element_type_value when addfee_rules.element_type = ''product_type'' then p.product_type = addfee_rules.element_type_value when addfee_rules.element_type = ''catalog'' then c.id = addfee_rules.element_type_value when addfee_rules.element_type = ''manufacturer'' then p.brand_name = addfee_rules.element_type_value when addfee_rules.element_type = ''tag'' then addfee_rules.element_type_value in (select pt3.tag_id from ##CATALOG_DB##.product_tags pt3 where pt3.product_id = p.id) end left outer join ##CATALOG_DB##.additionalfees addfee on addfee.id = addfee_rules.add_fee_id and addfee.site_id = c.site_id left outer join ##CATALOG_DB##.products addfeeproduct on addfeeproduct.id = addfee_rules.element_type_value where c.catalog_type= ##catalog_type## and p.id = ##product_id## order by cw.order_seq,cw.created_on, promo.order_seq,promo.created_on, addfee.order_seq, addfee.created_on)' where name = 'products';

update es_queries set query = 'select pfr.uuid as folder_id, pfr.name as folder_name, l.langue_id, p.uuid as page_id, p.name, p.type, p.path, p.langue_code, p.variant, p.html_file_path, coalesce(ccnt.published_url,'''') as published_url, p.canonical_url, p.title, p.meta_keywords, p.meta_description, p.dl_page_type, p.dl_sub_level_1, p.dl_sub_level_2, p.package_name, p.class_name, p.layout, p.social_title, p.social_type, p.social_description, p.social_image, p.social_twitter_message, p.social_twitter_hashtags, p.social_email_subject, p.social_email_popin_title, p.social_email_message, p.social_sms_text, p.publish_status, p.row_height, p.item_margin_x, p.item_margin_y, p.container_padding_x, p.container_padding_y, p.dynamic_html, p.layout_data, p.get_html_status, ptags.tag_id tag_id, pmt.meta_name, pmt.meta_content, pb.sort_order bloc_sort_order, b.name bloc_name, b.uuid bloc_id, ptm.uuid as template_id, ptm.name as template_name, ptm.custom_id as template_custom_id, ptm.description as template_description, ptm.template_code as template_code, ptm.is_system as template_is_system, pti.id as item_id, pti.name as item_name, pti.custom_id as item_custom_id, pti.sort_order as item_sort_order, ptib.sort_order as item_bloc_sort_order, ib.uuid as item_bloc_id, ib.name as item_bloc_name, ptid.css_classes as item_detail_css_classes, ptid.css_style item_detail_css_style, pf.form_id as form_id, pf.sort_order page_form_sort_order from ##PAGES_DB##.pages p left outer join ##PAGES_DB##.language l on l.langue_code = p.langue_code left outer join ##PAGES_DB##.pages_folders pfr on pfr.id = p.folder_id left outer join ##PORTAL_DB##.cached_content_view ccnt on ccnt.site_id = p.site_id and ccnt.content_type = ''page'' and ccnt.content_id = p.id and ccnt.lang = l.langue_code left outer join ##PAGES_DB##.pages_tags ptags on ptags.page_id = p.id left outer join ##PAGES_DB##.pages_meta_tags pmt on pmt.page_id = p.id left outer join ##PAGES_DB##.pages_blocs pb on pb.page_id = p.id left outer join ##PAGES_DB##.blocs b on b.id = pb.bloc_id left outer join ##PAGES_DB##.page_templates ptm on ptm.id = p.template_id left outer join ##PAGES_DB##.page_templates_items pti on pti.page_template_id = ptm.id left outer join ##PAGES_DB##.page_templates_items_blocs ptib on ptib.item_id = pti.id and ptib.langue_id = l.langue_id left outer join ##PAGES_DB##.blocs ib on ib.id = ptib.bloc_id left outer join ##PAGES_DB##.page_templates_items_details ptid on ptid.item_id = pti.id and ptid.langue_id = l.langue_id left outer join ##PAGES_DB##.pages_forms pf on pf.page_id = p.id where p.type = ''freemarker'' and p.site_id = ##site_id## and p.id = ##page_id##' where name = 'pages';

update es_queries set query = 'select bt.id as bloc_template_id, bt.name as bloc_template_name, bt.custom_id as bloc_template_custom_id, bt.type as bloc_template_type, l.langue_code, l.langue_id, scp.id content_id, scp.uuid content_uuid, scp.name content_name, scp.publish_status content_publish_status, scdp.fd_content_data_2 content_data,f.name as folder_name, f.uuid as folder_id,fd.path_prefix folder_path_prefix,pg.canonical_url page_canonical_url,pg.uuid AS page_id,pg.NAME AS page_name,pg.type AS page_type,pg.path AS page_path,pg.publish_status AS page_publish_status,coalesce(ccnt.published_url,'''') as published_url from ##PAGES_DB##.language l inner join ##PAGES_DB##.structured_contents_published scp left outer join ##PAGES_DB##.structured_contents_details_published scdp on scdp.content_id = scp.id and scdp.langue_id = l.langue_id left outer JOIN ##PAGES_DB##.pages pg ON pg.id = scdp.page_id and pg.langue_code = l.langue_code left outer join ##PORTAL_DB##.cached_content_view ccnt on ccnt.content_type = ''page'' and ccnt.content_id = pg.id and ccnt.lang = l.langue_code and ccnt.site_id = pg.site_id inner join ##PAGES_DB##.bloc_templates bt on bt.type <> ''store'' and bt.id = scp.template_id left outer join ##PAGES_DB##.pages_folders f ON scp.folder_id = f.id left outer join ##PAGES_DB##.folders_details fd ON fd.folder_id = f.id AND l.langue_id = fd.langue_id where scp.type = ''page'' and scp.publish_status = ''published'' and scp.site_id = ##site_id## and case when ##sc_uuid## = ''All'' then 1 else scp.uuid end = case when ##sc_uuid## = ''All'' then 1 else ##sc_uuid## end ' where name = 'structured_page';

update es_queries set query = 'select scp.uuid as content_id, scp.name as content_name, bt.id as bloc_template_id, bt.name as bloc_template_name, bt.custom_id as bloc_template_custom_id, bt.type as bloc_template_type, l.langue_code, l.langue_id, scdp.fd_content_data_2 content_data, scdp.id as content_detail_id from ##PAGES_DB##.language l inner join ##PAGES_DB##.structured_contents_published scp left outer join ##PAGES_DB##.structured_contents_details_published scdp on scdp.content_id = scp.id and scdp.langue_id = l.langue_id inner join ##PAGES_DB##.bloc_templates bt on bt.id = scp.template_id where scp.type = ''content'' and scp.site_id = ##site_id## and case when ##sc_uuid## = ''All'' then 1 else scp.uuid end = case when ##sc_uuid## = ''All'' then 1 else ##sc_uuid## end ' where name = 'structured_content';

update es_queries set pagination_col = 'content_id',ignore_selectable_col='content_id' where name='structured_page';

update es_queries set pagination_col = 'content_id',ignore_selectable_col='content_id' where name='structured_content';

update es_queries set pagination_col = 'product_id',ignore_selectable_col=null where name='products';


select @qid := max(id)+1 from query_types;
insert into query_types (id, query_name, query_type) values (@qid, 'stores','Stores');

insert into es_queries (name,query_type_id,pagination_col,ignore_selectable_col,query) values ('stores', @qid,'content_id','content_id','select bt.id as bloc_template_id, bt.name as bloc_template_name, bt.custom_id as bloc_template_custom_id, bt.type as bloc_template_type, l.langue_code, l.langue_id, scp.id content_id, scp.uuid content_uuid, scp.name content_name, scp.publish_status content_publish_status, scdp.fd_content_data_2 content_data,f.name as folder_name, f.uuid as folder_id,fd.path_prefix folder_path_prefix,pg.canonical_url page_canonical_url,pg.uuid AS page_id,pg.NAME AS page_name,pg.type AS page_type,pg.path AS page_path,pg.publish_status AS page_publish_status,coalesce(ccnt.published_url,'''') as published_url from ##PAGES_DB##.language l inner join ##PAGES_DB##.structured_contents_published scp left outer join ##PAGES_DB##.structured_contents_details_published scdp on scdp.content_id = scp.id and scdp.langue_id = l.langue_id left outer JOIN ##PAGES_DB##.pages pg ON pg.id = scdp.page_id and pg.langue_code = l.langue_code left outer join ##PORTAL_DB##.cached_content_view ccnt on ccnt.content_type = ''page'' and ccnt.content_id = pg.id and ccnt.lang = l.langue_code and ccnt.site_id = pg.site_id inner join ##PAGES_DB##.bloc_templates bt on bt.type = ''store'' and bt.id = scp.template_id left outer join ##PAGES_DB##.pages_folders f ON scp.folder_id = f.id left outer join ##PAGES_DB##.folders_details fd ON fd.folder_id = f.id AND l.langue_id = fd.langue_id where scp.type = ''page'' and scp.publish_status = ''published'' and scp.site_id = ##site_id## and case when ##sc_uuid## = ''All'' then 1 else scp.uuid end = case when ##sc_uuid## = ''All'' then 1 else ##sc_uuid## end');

-- select concat('insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (',id,',''',query_name,''',''',coalesce(parent_level_id,''),''',''',j_object,''',''',j_object_key,''',''',j_object_columns,''');') from es_query_levels order by query_name,id;

truncate es_query_levels;
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (18,'blocs',NULL,'blocs','bloc_id','id:bloc_id,name:bloc_name,refresh_interval:bloc_refresh_interval,start_date:bloc_start_date,end_date:bloc_end_date,visible_to:bloc_visible_to,margin_top:bloc_margin_top,margin_bottom:bloc_margin_bottom,description:bloc_description,template_data:bloc_template_data,rss_feed_ids:bloc_rss_feed_ids,rss_feed_sort:bloc_rss_feed_sort');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (19,'blocs','18','template','template_id','name:template_name,custom_id:template_custom_id,type:template_type,description:template_description,template_code,css_code:template_css_code,js_code:template_js_code');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (20,'blocs','18','sections','level_1_section_id','name:level_1_section_name,custom_id:level_1_section_custom_id,sort_order:level_1_section_sort_order,nb_items:level_1_section_nb_items');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (21,'blocs','20','sections','level_2_section_id','name:level_2_section_name,custom_id:level_2_section_custom_id,sort_order:level_2_section_sort_order,nb_items:level_2_section_nb_items');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (22,'blocs','21','sections','level_3_section_id','name:level_3_section_name,custom_id:level_3_section_custom_id,sort_order:level_3_section_sort_order,nb_items:level_3_section_nb_items');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (23,'blocs','20','fields','level_1_field_id','name:level_1_field_name,custom_id:level_1_field_custom_id,sort_order:level_1_field_sort_order,nb_items:level_1_field_nb_items,type:level_1_field_type,value:level_1_field_value,default_value:level_1_field_default_value,is_required:level_1_field_is_required,placeholder:level_1_field_placeholder');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (24,'blocs','21','fields','level_2_field_id','name:level_2_field_name,custom_id:level_2_field_custom_id,sort_order:level_2_field_sort_order,nb_items:level_2_field_nb_items,type:level_2_field_type,value:level_2_field_value,default_value:level_2_field_default_value,is_required:level_2_field_is_required,placeholder:level_2_field_placeholder');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (25,'blocs','22','fields','level_3_field_id','name:level_3_field_name,custom_id:level_3_field_custom_id,sort_order:level_3_field_sort_order,nb_items:level_3_field_nb_items,type:level_3_field_type,value:level_3_field_value,default_value:level_3_field_default_value,is_required:level_3_field_is_required,placeholder:level_3_field_placeholder');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (26,'blocs','18','libraries','library_id','name:library_name');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (27,'blocs','26','files','file_id','name:file_name,type:file_type');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (28,'blocs','18','tags','tag_id','tag_id');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (29,'pages',NULL,'pages','page_id','id:page_id,name,type,folder_id,folder_name,path,langue_code,variant,html_file_path,published_url,canonical_url,title,meta_keywords,meta_description,dl_page_type,dl_sub_level_1,dl_sub_level_2,package_name,class_name,layout,social_title,social_type,social_description,social_image,social_twitter_message,social_twitter_hashtags,social_email_subject,social_email_popin_title,social_email_message,social_sms_text,publish_status,row_height,item_margin_x,item_margin_y,container_padding_x,container_padding_y');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (30,'pages','29','tags','tag_id','tag_id');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (31,'pages','29','meta','meta_name','meta_name,meta_content');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (32,'pages','29','blocs','bloc_id','id:bloc_id,name:bloc_name');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (33,'pages','29','template','template_id','id:template_id,name:template_name,custom_id:template_custom_id,description:template_description,template_code,is_system:template_is_system');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (34,'pages','33','items','item_id','name:item_name,custom_id:item_custom_id,sort_order:item_sort_order,css_classes:item_detail_css_classes,css_style:item_detail_css_style');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (35,'pages','34','blocs','item_bloc_id','id:item_bloc_id,name:item_bloc_name,sort_order:item_bloc_sort_order');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (36,'pages','29','forms','form_id','id:form_id,sort_order:page_form_sort_order');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (6,'products',NULL,'products','product_id','product_id,folder_id,folder_name,product_type,payment_online,payment_cash_on_delivery,sort_variant,allow_ratings,allow_comments,allow_complaints,allow_questions,is_new,show_basket,show_quickbuy,product_order_seq,brand_name,sort_variant_label');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (7,'products','6','variants','variant_id','price:variant_price,sku:variant_sku,stock:variant_stock,is_active:variant_is_active,is_default:variant_is_default,is_show_price:variant_is_show_price,sticker:variant_sticker');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (8,'products','6','language','langue_id','langue_code,product_name:product_lang_<key>_name,main_features,summary,published_url');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (9,'products','7','language','langue_id','langue_code,variant_name,action_button_desktop,action_button_desktop_url,action_button_mobile,action_button_mobile_url,sticker_label:sticker_label_lang_<key>');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (11,'products','8','essentials','essentials_id','block_text:essentials_block_text,file_name:essentials_file_name,image_label:essentials_image_label,order_seq:essentials_order_seq');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (12,'products','9','resources','variant_res_id','type:variant_res_type,path:variant_res_path,sort_order:variant_res_sort_order');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (13,'products','7','attributes','cat_attrib_id','name:attribute_name,value:attribute_value,small_text:attribute_small_text');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (14,'products','6','tags','tag_id','id:tag_id,label:tag_label');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (15,'products','8','tabs','tab_id','name:tab_name,content:tab_content,order_seq:tab_order_seq');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (16,'products','6','specs','spec_attribs','spec_attribs');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (17,'products','7','images','product_img_id','label:product_image_label,file_name:product_img_file_name,sort_order:product_img_sort_order');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (49,'products','6','comewiths','comewith_id','id:comewith_id,name:comewith_name,visible_to:comewith_visible_to,start_date:comewith_start_date,end_date:comewith_end_date,comewith:comewith,type:comewith_type,applied_to_type:comewith_applied_to_type,applied_to_value:comewith_applied_to_value,title:comewith_title,variant_type:comewith_variant_type,frequency:comewith_frequency,order_seq:comewith_order_seq');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (50,'products','49','language','langue_id','langue_code,description:comewith_lang_<key>_description');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (51,'products','6','promos','promo_id','id:promo_id,name:promo_name,visible_to:promo_visible_to,start_date:promo_start_date,end_date:promo_end_date,flash_sale_quantity:promo_flash_sale_quantity,flash_sale:promo_flash_sale,discount_type:promo_discount_type,discount_value:promo_discount_value,duration:promo_duration,frequency:promo_frequency,applied_to_type:promo_applied_to_type,applied_to_value:promo_applied_to_value,order_seq:promo_order_seq');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (52,'products','51','language','langue_id','langue_code,description:promo_lang_<key>_description,title:promo_lang_<key>_title');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (57,'products','6','additional_fees','addfee_id','id:addfee_id,name:addfee_additional_fee,visible_to:addfee_visible_to,start_date:addfee_start_date,end_date:addfee_end_date,applied_to_type:addfee_element_type,applied_to_value:addfee_element_type_value,order_seq:comewith_order_seq');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (58,'products','57','language','langue_id','langue_code,description:addfee_lang_<key>_description');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (59,'stores',NULL,'store','content_id','id:content_uuid,name:content_name,folder_name,folder_id');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (60,'stores','59','bloc_template','bloc_template_id','name:bloc_template_name,custom_id:bloc_template_custom_id,type:bloc_template_type');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (61,'stores','59','language','langue_id','langue_code,content_data');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (62,'stores','61','page','page_id','id:page_id,name:page_name,type:page_type,path:page_path,canonical_url:page_canonical_url,published_url');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (37,'structured_content',NULL,'structured_content','content_id','id:content_id,name:content_name');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (38,'structured_content','37','bloc_template','bloc_template_id','name:bloc_template_name,custom_id:bloc_template_custom_id,type:bloc_template_type');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (39,'structured_content','37','language','langue_id','langue_code,content_data');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (42,'structured_page',NULL,'structured_page','content_id','id:content_uuid,name:content_name,folder_name,folder_id');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (43,'structured_page','42','bloc_template','bloc_template_id','name:bloc_template_name,custom_id:bloc_template_custom_id,type:bloc_template_type');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (44,'structured_page','42','language','langue_id','langue_code,content_data');
insert into es_query_levels(id,query_name,parent_level_id,j_object,j_object_key,j_object_columns) values (47,'structured_page','44','page','page_id','id:page_id,name:page_name,type:page_type,path:page_path,canonical_url:page_canonical_url,published_url');


-- select concat('insert into es_query_col_mapping(query_name,col,mapped_cols) values (''',query_name,''',''',col,''',''',mapped_cols,''');') from es_query_col_mapping order by query_name;
truncate es_query_col_mapping;
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','section_name','level_1_section_name,level_2_section_name,level_3_section_name');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','section_custom_id','level_1_section_custom_id,level_2_section_custom_id,level_3_section_custom_id');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','section_sort_order','level_1_section_sort_order,level_2_section_sort_order,level_3_section_sort_order');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','section_nb_items','level_1_section_nb_items,level_2_section_nb_items,level_3_section_nb_items');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_name','level_1_field_name,level_2_field_name,level_3_field_name');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_custom_id','level_1_field_custom_id,level_2_field_custom_id,level_3_field_custom_id');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_sort_order','level_1_field_sort_order,level_2_field_sort_order,level_3_field_sort_order');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_nb_items','level_1_field_nb_items,level_2_field_nb_items,level_3_field_nb_items');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_type','level_1_field_type,level_2_field_type,level_3_field_type');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_value','level_1_field_value,level_2_field_value,level_3_field_value');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_default_value','level_1_field_default_value,level_2_field_default_value,level_3_field_default_value');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_is_required','level_1_field_is_required,level_2_field_is_required,level_3_field_is_required');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','field_placeholder','level_1_field_placeholder,level_2_field_placeholder,level_3_field_placeholder');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','library_file_name','file_name');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','library_file_label','file_label');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('blocs','library_file_type','file_type');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('products','product_name','product_lang_1_name,product_lang_2_name,product_lang_3_name,product_lang_4_name,product_lang_5_name');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('products','sticker_label','sticker_label_lang_1,sticker_label_lang_2,sticker_label_lang_3,sticker_label_lang_4,sticker_label_lang_5');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('products','specs','spec_attribs');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('products','comewith_description','comewith_lang_1_description,comewith_lang_2_description,comewith_lang_3_description,comewith_lang_4_description,comewith_lang_5_description');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('products','promo_description','promo_lang_1_description,promo_lang_2_description,promo_lang_3_description,promo_lang_4_description,promo_lang_5_description');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('products','promo_title','promo_lang_1_title,promo_lang_2_title,promo_lang_3_title,promo_lang_4_title,promo_lang_5_title');
insert into es_query_col_mapping(query_name,col,mapped_cols) values ('products','additional_fee_description','addfee_lang_1_description,addfee_lang_2_description,addfee_lang_3_description,addfee_lang_4_description,addfee_lang_5_description');

